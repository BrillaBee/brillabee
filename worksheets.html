<script src="assets/generated-files.js"></script>
<script>
  const worksheetFolder = "worksheets/";
  const container = document.getElementById("worksheet-list");

  // Group by Year â†’ Category (Test, Script, Marking Scheme)
  const grouped = {};

  files.forEach(file => {
    const yearMatch = file.match(/Year[\s_]?7[\s_]?(\d{4})/i);
    if (!yearMatch) return;

    const year = yearMatch[1];
    let type = "Other";

    if (/marking scheme/i.test(file)) type = "Marking Scheme";
    else if (/script/i.test(file)) type = "Script";
    else if (/test/i.test(file)) type = "Test";

    if (!grouped[year]) grouped[year] = {};
    if (!grouped[year][type]) grouped[year][type] = [];

    grouped[year][type].push(file);
  });

  const yearList = Object.keys(grouped).sort();

  yearList.forEach(year => {
    const yearSection = document.createElement("section");
    yearSection.innerHTML = `<h2 style="width:100%">ðŸ“˜ Year 7 ${year}</h2>`;

    Object.entries(grouped[year]).forEach(([type, fileList]) => {
      const subHeader = document.createElement("h3");
      subHeader.textContent = `ðŸ“‚ ${type}`;
      subHeader.style.marginTop = "1rem";

      const typeContainer = document.createElement("div");
      typeContainer.className = "card-list";

      fileList.forEach(file => {
        const card = document.createElement("div");
        card.className = "worksheet-card";
        card.innerHTML = `
          <h4>${file.replace(".pdf", "")}</h4>
          <a href="${worksheetFolder + file}" target="_blank" class="download-btn">ðŸ“¥ Download PDF</a>
        `;
        typeContainer.appendChild(card);
      });

      yearSection.appendChild(subHeader);
      yearSection.appendChild(typeContainer);
    });

    container.appendChild(yearSection);
  });
</script>
